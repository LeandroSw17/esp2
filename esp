-- Configurações
local ESP_COLOR = Color3.fromRGB(255, 0, 0) -- Cor da caixa de esp (vermelho neste exemplo)
local ESP_TRANSPARENCY = 0.5 -- Transparência da caixa de esp (0.5 neste exemplo)
local ESP_THICKNESS = 1 -- Espessura da caixa de esp (1 neste exemplo)

-- Função para criar a caixa de esp
local function createESP(player)
    -- Cria um bloco para a caixa de esp
    local box = Instance.new("BoxHandleAdornment")
    box.Name = "ESP_Box"
    box.Size = player.Character.HumanoidRootPart.Size + Vector3.new(0.1, 0.1, 0.1)
    box.Color3 = ESP_COLOR
    box.Transparency = ESP_TRANSPARENCY
    box.AlwaysOnTop = true
    box.ZIndex = 5
    box.Adornee = player.Character.HumanoidRootPart
    box.Parent = player.Character.HumanoidRootPart

    -- Cria um texto para exibir o nome do jogador
    local nameTag = Instance.new("BillboardGui")
    nameTag.Name = "ESP_NameTag"
    nameTag.Size = UDim2.new(2, 0, 1, 0)
    nameTag.StudsOffset = Vector3.new(0, 2, 0)
    nameTag.AlwaysOnTop = true
    nameTag.Parent = player.Character.Head

    local nameLabel = Instance.new("TextLabel")
    nameLabel.Name = "NameLabel"
    nameLabel.Size = UDim2.new(1, 0, 0.2, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = player.Name
    nameLabel.TextColor3 = ESP_COLOR
    nameLabel.TextSize = 12
    nameLabel.Font = Enum.Font.SourceSansBold
    nameLabel.Parent = nameTag
end

-- Função para remover a caixa de esp
local function removeESP(player)
    local box = player.Character.HumanoidRootPart:FindFirstChild("ESP_Box")
    local nameTag = player.Character.Head:FindFirstChild("ESP_NameTag")

    if box then
        box:Destroy()
    end

    if nameTag then
        nameTag:Destroy()
    end
end

-- Evento para adicionar a caixa de esp quando o jogador entra no jogo
game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function(character)
        wait(1) -- Espere um momento para garantir que o personagem esteja totalmente carregado
        createESP(player)
    end)
end)

-- Evento para remover a caixa de esp quando o jogador sai do jogo
game.Players.PlayerRemoving:Connect(function(player)
    removeESP(player)
end)

-- Adicione a caixa de esp para todos os jogadores já presentes no jogo
for _, player in ipairs(game.Players:GetPlayers()) do
    createESP(player)
end
