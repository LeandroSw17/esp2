local espEnabled = true -- Define se o ESP est√° ativado ou desativado
local boxThickness = 0.1 -- Define a espessura da caixa
local boxColor = Color3.fromRGB(255, 0, 0) -- Define a cor da caixa (RGB)

local function createESP(player)
    local box = Instance.new("BoxHandleAdornment")
    box.Size = player.Character:WaitForChild("HumanoidRootPart").Size + Vector3.new(0.1, 0.1, 0.1)
    box.Color3 = boxColor
    box.Transparency = 0.5
    box.AlwaysOnTop = true
    box.ZIndex = 5
    box.Adornee = player.Character:WaitForChild("HumanoidRootPart")
    box.Parent = player.Character:WaitForChild("HumanoidRootPart")

    player.Character.HumanoidRootPart:GetPropertyChangedSignal("Position"):Connect(function()
        box.Size = player.Character.HumanoidRootPart.Size + Vector3.new(0.1, 0.1, 0.1)
        box.Adornee = player.Character.HumanoidRootPart
    end)
end

local function removeESP(player)
    local character = player.Character
    if character then
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            for _, child in ipairs(rootPart:GetChildren()) do
                if child:IsA("BoxHandleAdornment") then
                    child:Destroy()
                end
            end
        end
    end
end

local function onPlayerAdded(player)
    createESP(player)

    player.CharacterAdded:Connect(function(character)
        createESP(player)
    end)
end

for _, player in ipairs(game.Players:GetPlayers()) do
    onPlayerAdded(player)
end

game.Players.PlayerAdded:Connect(onPlayerAdded)

game.Players.PlayerRemoving:Connect(removeESP)
